<template>  <div id='discovery-recommend-container' class='discovery-recommend-container'>    <div class='search-banner'>      <el-image :src='DiscoveryBg' class='w-screen' />      <div class='search-main'>        <h2>在 {{ appConfigStore.appConfig.appName }} 找到自己的社区</h2>        <p>从游戏、音乐到教育，总有你的一片天地。</p>        <div class='search-input-box'>          <input v-model='searchInputValue' class='search-input' placeholder='探索社区' type='text'>          <div class='input-icon'>            <IconSearch v-if='!searchInputValue' style='color: rgba(78, 80, 88, 0.6)' />            <IconClose v-if='searchInputValue' style='color: rgba(78, 80, 88)' @click='clearInput' />          </div>        </div>      </div>    </div>    <div class='discovery-guild-container'>      <h3>热门社区</h3>      <div class='guild-list'>        <div v-for='item in discoveryGuildStore.currentDiscoveryGuild' class='discovery-guild'             @click='router.push(`/channels/${item.id}/${item.defaultChannelId}`)'>          <div class='icon'>            <img v-if='item.avatar' :src='item.avatar' alt=''>            <img v-if='!item.avatar'                 alt=''                 src='https://cdn.discordapp.com/discovery-splashes/884849473329692723/352def4f57f5ec5f2ce03c5c0dd52374.jpg?size=600'>          </div>          <div class='info'>            <div class='name'>              <IconGuildFlag class='IconGuildFlag' />              {{ item.name }}            </div>            <div class='intro'>              {{ item.intro ? item.intro : '暂无介绍' }}            </div>            <div class='foot'>              <span class='circle'></span>              <span>{{ item.memberCount ? item.memberCount : 0 }} 位成员</span>            </div>          </div>        </div>      </div>    </div>    <div class='discovery-foot'>      <h4>还有更多社区等你发现！</h4>      <h5>        <el-link type='primary' @click='toTop'>试着进行搜索吧</el-link>      </h5>    </div>  </div></template><script lang='ts' setup>  import DiscoveryBg from '@/assets/images/discovery-bg.svg'  import IconSearch from '@/components/icons/discovery/IconSearch.vue'  import { ref } from 'vue'  import IconClose from '@/components/icons/discovery/IconClose.vue'  import IconGuildFlag from '@/components/icons/discovery/IconGuildFlag.vue'  import httpRequest from '@/utils/httpRequest'  import { useDiscoveryGuildStore } from '@/stores/discoverGuild'  import { useRoute } from 'vue-router'  import router from '@/router'  import { useAppConfigStore } from '@/stores/appConfig'  const route = useRoute()  const appConfigStore = useAppConfigStore()  const toTop = () => {    document.getElementById('discovery-recommend-container').scrollTo({      top: 0,      behavior: 'smooth'    })  }  const searchInputValue = ref('')  const clearInput = () => {    searchInputValue.value = ''  }  const discoveryGuildStore = useDiscoveryGuildStore()  const loadDiscoveryGuild = () => {    httpRequest.request({      url: `/api/v1/discoveryGuild/list`,      method: 'post'    }).then(data => {      discoveryGuildStore.updateDiscoveryGuild(data)      console.log(discoveryGuildStore.discoveryGuild)    }).catch(error => {      console.error('请求失败1：', error)    })  }  loadDiscoveryGuild()</script><style lang='less' scoped>  @import "@/assets/less/base";  .discovery-recommend-container {    color: white;    padding: 30px;    overflow-y: auto;    max-height: calc(100vh - 60px); /* 通过计算得到固定的高度 */    user-select: none;    .search-banner {      margin-bottom: 30px;      position: relative;      display: flex;      min-width: 600px;      .search-main {        width: 100%;        height: 100%;        position: absolute;        display: flex;        justify-content: center;        align-items: center;        flex-direction: column;        font-size: 14px;        p {          margin: 10px 0;        }        .search-input-box {          overflow: hidden;          background-color: white;          display: flex;          border-radius: 4px;          align-items: center;          padding: 8px;          width: 50%;          .search-input {            flex: 1;            border: 0;            height: 1.5rem;            font-size: 16px;            background: none;          }          .search-input:focus {            outline: none;          }          .input-icon {            width: 24px;            height: 24px;            cursor: pointer;          }        }      }    }    .discovery-guild-container {      margin-bottom: 30px;      cursor: pointer;      .guild-list {        margin-top: 16px;        display: grid;        grid-gap: 16px;        grid-template-columns: repeat(auto-fill, minmax(248px, 1fr));        .discovery-guild:hover {          transform: scale(1.004);          background-color: #222222;        }        .discovery-guild {          transition: all .1s ease-in-out;          width: 100%;          height: 320px;          background-color: #232428;          border-radius: 8px;          overflow: hidden;          .icon img {            height: 143px;            width: 100%;            object-fit: cover;          }          .info {            margin: 20px;            height: 100%-55px;            display: flex;            flex-direction: column;            .name {              display: flex;              align-items: center;              font-weight: bold;              font-size: 16px;              .IconGuildFlag {                margin-right: 5px;              }            }            .intro {              flex: 1;              margin: 5px 0;              color: #b5bac1;              font-size: 14px;            }            .foot {              height: 1rem;              font-size: 12px;              color: #b5bac1;              margin: 5px 0;              display: flex;              align-items: center;              .circle {                height: 8px;                width: 8px;                background-color: #b5bac1;                border-radius: 50%;                margin-right: 5px;              }            }          }        }      }    }    .discovery-foot {      display: flex;      justify-content: center;      align-items: center;      flex-direction: column;    }  }</style>