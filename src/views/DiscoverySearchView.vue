<template>    <div class="discovery-search-main-container" id="discovery-search-main-container">        <div class="search-box">            <el-image :src="DiscoveryBg" style="width: 100%"/>            <div class="search-main">                <h2>在 PUPU 找到自己的社区</h2>                <p>从游戏、音乐到教育，总有你的一片天地。</p>                <div class="search-input-box">                    <input class="search-input" type="text" placeholder="探索社区" v-model="searchInputValue">                    <div class="input-icon">                        <IconSearch style="color: rgba(78, 80, 88, 0.6)" v-if="!searchInputValue"/>                        <IconClose style="color: rgba(78, 80, 88)" v-if="searchInputValue" @click="clearInput"/>                    </div>                </div>            </div>        </div>        <div class="discovery-guild-container">            <h3>热门社区</h3>            <div class="guild-list">                <div class="guild-box" v-for="item in discoveryGuildStore.currentDiscoveryGuild" @click="router.replace(`/channels/${item.id}/${item.defaultChannelId}`)">                    <div class="ds-guild-icon">                        <img v-if="item.avatar" :src="item.avatar"                             alt="">                        <img v-if="!item.avatar"                             src="https://cdn.discordapp.com/discovery-splashes/884849473329692723/352def4f57f5ec5f2ce03c5c0dd52374.jpg?size=600"                             alt="">                    </div>                    <div class="ds-guildInfo">                        <div class="ds-guild-name">                            <IconGuildFlag class="IconGuildFlag"/>                            {{ item.name }}                        </div>                        <div class="ds-guild-intro">                            {{ item.intro ? item.intro : '暂无介绍' }}                        </div>                        <div class="ds-guild-foot">                            <span class="circle"></span>                            <span>{{ item.memberCount ? item.memberCount : 0 }} 位成员</span>                        </div>                    </div>                </div>            </div>        </div>        <div class="discovery-foot">            <h4>还有更多社区等你发现！</h4>            <h5><el-link type="primary" @click="toTop">试着进行搜索吧</el-link></h5>        </div>    </div></template><script setup lang="ts">import DiscoveryBg from '@/assets/images/discovery-bg.svg';import IconSearch from "@/components/icons/IconSearch.vue";import {ref} from "vue";import IconClose from "@/components/icons/IconClose.vue";import IconGuildFlag from "@/components/icons/IconGuildFlag.vue";import httpRequest from "@/utils/httpRequest";import {useDiscoveryGuildStore} from "@/stores/discoverGuild";import {useRoute} from "vue-router";import router from "@/router";const route = useRoute()const toTop = () => {    document.getElementById('discovery-search-main-container').scrollTo({        top: 0,        behavior: 'smooth'    })}const searchInputValue = ref('')const clearInput = () => {    searchInputValue.value = ''}const discoveryGuildStore = useDiscoveryGuildStore()const loadDiscoveryGuild = () => {    httpRequest.request({        url: `/api/v1/discoveryGuild/list`,        method: "post",    }).then(data => {        discoveryGuildStore.updateDiscoveryGuild(data)        console.log(discoveryGuildStore.discoveryGuild)    }).catch(error => {        console.error("请求失败1：", error);    });}loadDiscoveryGuild()</script><style scoped lang="less">@import "@/assets/less/base";.discovery-search-main-container {  color: white;  padding: 30px;  overflow-y: auto;  max-height: calc(100vh - 60px); /* 通过计算得到固定的高度 */  user-select: none;  .search-box {    margin-bottom: 30px;    position: relative;    display: flex;    min-width: 600px;    .search-main {      width: 100%;      height: 100%;      position: absolute;      display: flex;      justify-content: center;      align-items: center;      flex-direction: column;      font-size: 14px;      p {        margin: 10px 0;      }      .search-input-box {        overflow: hidden;        background-color: white;        display: flex;        border-radius: 4px;        align-items: center;        padding: 8px;        width: 50%;        .search-input {          flex: 1;          border: 0;          height: 1.5rem;          font-size: 16px;          background: none;        }        .search-input:focus {          outline: none;        }        .input-icon {          width: 24px;          height: 24px;          cursor: pointer;        }      }    }  }  .discovery-guild-container {    margin-bottom: 30px;    cursor: pointer;    .guild-list {      margin-top: 16px;      display: grid;      grid-gap: 16px;      grid-template-columns: repeat(auto-fill, minmax(248px, 1fr));      .guild-box:hover {        transform: scale(1.004);        background-color: #222222;      }      .guild-box {        transition: all .1s ease-in-out;        width: 100%;        height: 320px;        background-color: #232428;        border-radius: 8px;        overflow: hidden;        .ds-guild-icon {          img {            height: 143px;            width: 100%;            object-fit: cover;          }        }        .ds-guildInfo {          margin: 20px;          height: 100%-55px;          display: flex;          flex-direction: column;          .ds-guild-name {            display: flex;            align-items: center;            font-weight: bold;            font-size: 16px;            .IconGuildFlag {              margin-right: 5px;            }          }          .ds-guild-intro {            flex: 1;            margin: 5px 0;            color: #b5bac1;            font-size: 14px;          }          .ds-guild-foot {            height: 1rem;            font-size: 12px;            color: #b5bac1;            margin: 5px 0;            display: flex;            align-items: center;            .circle {              height: 8px;              width: 8px;              background-color: #b5bac1;              border-radius: 50%;              margin-right: 5px;            }          }        }      }    }  }  .discovery-foot {    display: flex;    justify-content: center;    align-items: center;    flex-direction: column;  }}</style>